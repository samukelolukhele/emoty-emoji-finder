{"ast":null,"code":"\"use strict\";\n\nvar xnv = require(\"xml-name-validator\");\n\nvar DOMException = require(\"domexception/webidl2js-wrapper\");\n\nvar _require = require(\"../helpers/namespaces\"),\n    XML_NS = _require.XML_NS,\n    XMLNS_NS = _require.XMLNS_NS; // https://dom.spec.whatwg.org/#validate\n\n\nexports.name = function (globalObject, name) {\n  var result = xnv.name(name);\n\n  if (!result.success) {\n    throw DOMException.create(globalObject, [\"\\\"\".concat(name, \"\\\" did not match the Name production: \").concat(result.error), \"InvalidCharacterError\"]);\n  }\n};\n\nexports.qname = function (globalObject, qname) {\n  exports.name(globalObject, qname);\n  var result = xnv.qname(qname);\n\n  if (!result.success) {\n    throw DOMException.create(globalObject, [\"\\\"\".concat(qname, \"\\\" did not match the QName production: \").concat(result.error), \"InvalidCharacterError\"]);\n  }\n};\n\nexports.validateAndExtract = function (globalObject, namespace, qualifiedName) {\n  if (namespace === \"\") {\n    namespace = null;\n  }\n\n  exports.qname(globalObject, qualifiedName);\n  var prefix = null;\n  var localName = qualifiedName;\n  var colonIndex = qualifiedName.indexOf(\":\");\n\n  if (colonIndex !== -1) {\n    prefix = qualifiedName.substring(0, colonIndex);\n    localName = qualifiedName.substring(colonIndex + 1);\n  }\n\n  if (prefix !== null && namespace === null) {\n    throw DOMException.create(globalObject, [\"A namespace was given but a prefix was also extracted from the qualifiedName\", \"NamespaceError\"]);\n  }\n\n  if (prefix === \"xml\" && namespace !== XML_NS) {\n    throw DOMException.create(globalObject, [\"A prefix of \\\"xml\\\" was given but the namespace was not the XML namespace\", \"NamespaceError\"]);\n  }\n\n  if ((qualifiedName === \"xmlns\" || prefix === \"xmlns\") && namespace !== XMLNS_NS) {\n    throw DOMException.create(globalObject, [\"A prefix or qualifiedName of \\\"xmlns\\\" was given but the namespace was not the XMLNS namespace\", \"NamespaceError\"]);\n  }\n\n  if (namespace === XMLNS_NS && qualifiedName !== \"xmlns\" && prefix !== \"xmlns\") {\n    throw DOMException.create(globalObject, [\"The XMLNS namespace was given but neither the prefix nor qualifiedName was \\\"xmlns\\\"\", \"NamespaceError\"]);\n  }\n\n  return {\n    namespace: namespace,\n    prefix: prefix,\n    localName: localName\n  };\n};","map":null,"metadata":{},"sourceType":"script"}